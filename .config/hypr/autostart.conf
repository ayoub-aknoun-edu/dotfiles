#################
### AUTOSTART ###
#################

# 1. ESSENTIAL: Set environment variables for D-Bus/Systemd FIRST
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=Hyprland XDG_SESSION_DESKTOP=Hyprland
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP XDG_SESSION_DESKTOP GTK_THEME QT_QPA_PLATFORMTHEME 

# 2. POLKIT: Needs to be up early for permissions
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# 3. GUI APPS: Add a tiny delay or ensure previous instances are killed
# This ensures Waybar doesn't "race" against the environment setup
exec-once = killall waybar; sleep 0.5 && waybar
exec-once = swaync
exec-once = swww-daemon

# 4. SERVICES & UTILS
exec-once = bash -lc 'systemctl --user start hypridle.service 2>/dev/null || hypridle'
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = hyprsunset --temperature 5000
